(function(){'use strict';const config={showWidget: true,widgetPosition: 'bottom-left',animateNumbers: true,showAchievements: true,showLeaderboard: false,earnings:{total: 0,thisMonth: 0,lastMonth: 0,currency: 'USD'},achievements:[],leaderboard:[],apiEndpoint: null,refreshInterval: 60000,primaryColor: '#7DF05D',backgroundColor: '#0A0A0A',trackingEnabled: true};let state={initialized: false,widgetVisible: false,dataLoaded: false,refreshTimer: null};const achievementDefs={first_referral:{name: 'First Referral',icon: 'ðŸŽ¯',description: 'Got your first referral'},ten_referrals:{name: '10 Referrals',icon: 'ðŸ”¥',description: 'Reached 10 referrals'},fifty_referrals:{name: '50 Referrals',icon: 'ðŸ’Ž',description: 'Reached 50 referrals'},hundred_referrals:{name: 'Century Club',icon: 'ðŸ‘‘',description: 'Reached 100 referrals'},first_100:{name: 'First $100',icon: 'ðŸ’µ',description: 'Earned your first $100'},first_1000:{name: 'First $1,000',icon: 'ðŸ’°',description: 'Earned your first $1,000'},first_10000:{name: 'First $10K',icon: 'ðŸ†',description: 'Earned your first $10,000'},early_adopter:{name: 'Early Adopter',icon: 'â­',description: 'One of the first 100K users'},top_earner:{name: 'Top Earner',icon: 'ðŸ¥‡',description: 'Top 10% of earners'},streak_7:{name: 'Week Streak',icon: 'ðŸ“…',description: '7 days of activity'},streak_30:{name: 'Month Streak',icon: 'ðŸ—“ï¸',description: '30 days of activity'}};const styles=` .ip-container{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;box-sizing: border-box;}.ip-container*{box-sizing: border-box;}.ip-widget{position: fixed;z-index: 999990;background: linear-gradient(135deg,#1a1a2e 0%,#0f0f23 100%);border: 1px solid rgba(125,240,93,0.2);border-radius: 16px;padding: 20px;min-width: 280px;max-width: 320px;box-shadow: 0 10px 40px rgba(0,0,0,0.3);transform: translateY(20px);opacity: 0;visibility: hidden;transition: all 0.4s cubic-bezier(0.4,0,0.2,1);}.ip-widget.ip-visible{transform: translateY(0);opacity: 1;visibility: visible;}.ip-widget.ip-bottom-left{bottom: 100px;left: 24px;}.ip-widget.ip-bottom-right{bottom: 100px;right: 24px;}.ip-widget-header{display: flex;align-items: center;justify-content: space-between;margin-bottom: 16px;}.ip-widget-title{color: #a0a0a0;font-size: 12px;font-weight: 500;text-transform: uppercase;letter-spacing: 0.5px;}.ip-widget-close{width: 24px;height: 24px;background: rgba(255,255,255,0.1);border: none;border-radius: 50%;color: #666;font-size: 14px;cursor: pointer;display: flex;align-items: center;justify-content: center;transition: all 0.2s;}.ip-widget-close:hover{background: rgba(255,255,255,0.15);color: #fff;}.ip-earnings{text-align: center;margin-bottom: 20px;}.ip-earnings-label{color: #666;font-size: 11px;text-transform: uppercase;letter-spacing: 0.5px;margin-bottom: 4px;}.ip-earnings-value{color: ${config.primaryColor};font-size: 36px;font-weight: 700;line-height: 1;}.ip-earnings-value .ip-currency{font-size: 20px;vertical-align: super;margin-right: 2px;}.ip-earnings-change{display: inline-flex;align-items: center;gap: 4px;margin-top: 8px;padding: 4px 10px;background: rgba(125,240,93,0.1);border-radius: 20px;color: ${config.primaryColor};font-size: 12px;font-weight: 500;}.ip-earnings-change.ip-negative{background: rgba(239,68,68,0.1);color: #ef4444;}.ip-stats{display: grid;grid-template-columns: 1fr 1fr;gap: 12px;margin-bottom: 16px;}.ip-stat{background: rgba(255,255,255,0.03);border: 1px solid rgba(255,255,255,0.05);border-radius: 10px;padding: 12px;text-align: center;}.ip-stat-value{color: #ffffff;font-size: 18px;font-weight: 600;}.ip-stat-label{color: #666;font-size: 11px;margin-top: 2px;}.ip-achievements{margin-bottom: 16px;}.ip-achievements-title{color: #a0a0a0;font-size: 11px;font-weight: 500;text-transform: uppercase;letter-spacing: 0.5px;margin-bottom: 10px;}.ip-achievements-grid{display: flex;flex-wrap: wrap;gap: 8px;}.ip-achievement{display: flex;align-items: center;gap: 6px;padding: 6px 10px;background: rgba(255,255,255,0.05);border: 1px solid rgba(255,255,255,0.1);border-radius: 8px;font-size: 12px;transition: all 0.2s;}.ip-achievement:hover{background: rgba(125,240,93,0.1);border-color: rgba(125,240,93,0.3);}.ip-achievement-icon{font-size: 14px;}.ip-achievement-name{color: #ffffff;}.ip-achievement-locked{opacity: 0.4;filter: grayscale(1);}.ip-progress{margin-bottom: 16px;}.ip-progress-header{display: flex;justify-content: space-between;margin-bottom: 6px;}.ip-progress-label{color: #a0a0a0;font-size: 12px;}.ip-progress-value{color: ${config.primaryColor};font-size: 12px;font-weight: 600;}.ip-progress-bar{height: 6px;background: rgba(255,255,255,0.1);border-radius: 3px;overflow: hidden;}.ip-progress-fill{height: 100%;background: linear-gradient(90deg,${config.primaryColor},#4ade80);border-radius: 3px;transition: width 1s ease-out;}.ip-leaderboard{margin-bottom: 16px;}.ip-leaderboard-title{color: #a0a0a0;font-size: 11px;font-weight: 500;text-transform: uppercase;letter-spacing: 0.5px;margin-bottom: 10px;}.ip-leaderboard-list{display: flex;flex-direction: column;gap: 8px;}.ip-leaderboard-item{display: flex;align-items: center;gap: 10px;padding: 10px;background: rgba(255,255,255,0.03);border-radius: 8px;}.ip-leaderboard-item.ip-current-user{background: rgba(125,240,93,0.1);border: 1px solid rgba(125,240,93,0.2);}.ip-leaderboard-rank{width: 24px;height: 24px;background: rgba(255,255,255,0.1);border-radius: 50%;display: flex;align-items: center;justify-content: center;font-size: 12px;font-weight: 600;color: #fff;}.ip-leaderboard-rank.ip-gold{background: linear-gradient(135deg,#ffd700,#ffb800);color: #000;}.ip-leaderboard-rank.ip-silver{background: linear-gradient(135deg,#c0c0c0,#a0a0a0);color: #000;}.ip-leaderboard-rank.ip-bronze{background: linear-gradient(135deg,#cd7f32,#b87333);color: #000;}.ip-leaderboard-name{flex: 1;color: #ffffff;font-size: 13px;font-weight: 500;}.ip-leaderboard-earnings{color: ${config.primaryColor};font-size: 13px;font-weight: 600;}.ip-cta{width: 100%;padding: 12px;background: ${config.primaryColor};color: #0A0A0A;border: none;border-radius: 10px;font-size: 14px;font-weight: 600;cursor: pointer;transition: all 0.2s;}.ip-cta:hover{transform: translateY(-2px);box-shadow: 0 4px 20px rgba(125,240,93,0.3);}.ip-inline{background: linear-gradient(135deg,#1a1a2e 0%,#16213e 100%);border: 1px solid rgba(125,240,93,0.2);border-radius: 16px;padding: 24px;margin: 24px 0;}.ip-inline-header{display: flex;align-items: center;gap: 16px;margin-bottom: 20px;}.ip-inline-avatar{width: 56px;height: 56px;background: linear-gradient(135deg,${config.primaryColor},#4ade80);border-radius: 50%;display: flex;align-items: center;justify-content: center;font-size: 24px;font-weight: 700;color: #0A0A0A;}.ip-inline-info h4{color: #ffffff;font-size: 18px;font-weight: 600;margin: 0 0 4px 0;}.ip-inline-info p{color: #a0a0a0;font-size: 13px;margin: 0;}.ip-inline-stats{display: grid;grid-template-columns: repeat(3,1fr);gap: 16px;margin-bottom: 20px;}.ip-inline-stat{text-align: center;}.ip-inline-stat-value{color: ${config.primaryColor};font-size: 24px;font-weight: 700;}.ip-inline-stat-label{color: #666;font-size: 12px;margin-top: 4px;}@keyframes ip-count-up{from{opacity: 0;transform: translateY(10px);}to{opacity: 1;transform: translateY(0);}}.ip-animate-number{animation: ip-count-up 0.5s ease-out;}@media(max-width: 640px){.ip-widget{left: 16px!important;right: 16px!important;max-width: none;bottom: 80px!important;}.ip-inline-stats{grid-template-columns: 1fr 1fr;}}`;function formatCurrency(amount,currency='USD'){return new Intl.NumberFormat('en-US',{style: 'currency',currency: currency,minimumFractionDigits: 0,maximumFractionDigits: 0}).format(amount);}function formatNumber(num){if(num>=1000000)return(num/1000000).toFixed(1)+'M';if(num>=1000)return(num/1000).toFixed(1)+'K';return num.toString();}function animateNumber(element,targetValue,duration=1000){if(!config.animateNumbers){element.textContent=formatNumber(targetValue);return;}const startValue=0;const startTime=performance.now();function update(currentTime){const elapsed=currentTime-startTime;const progress=Math.min(elapsed/duration,1);const eased=1-Math.pow(1-progress,3);const current=Math.floor(startValue+(targetValue-startValue)*eased);element.textContent=formatNumber(current);if(progress<1){requestAnimationFrame(update);}}requestAnimationFrame(update);}function trackEvent(eventName,data={}){if(!config.trackingEnabled)return;if(window.UniLiveAnalytics&&typeof window.UniLiveAnalytics.trackEvent==='function'){window.UniLiveAnalytics.trackEvent(eventName,data);}}function injectStyles(){if(document.getElementById('ip-styles'))return;const styleEl=document.createElement('style');styleEl.id='ip-styles';styleEl.textContent=styles;document.head.appendChild(styleEl);}function createWidget(){if(document.getElementById('ip-widget'))return;const positionClass='ip-'+config.widgetPosition;const widget=document.createElement('div');widget.className='ip-container ip-widget '+positionClass;widget.id='ip-widget';widget.innerHTML=`<div class="ip-widget-header"><span class="ip-widget-title">My Earnings</span><button class="ip-widget-close">&times;</button></div><div class="ip-earnings"><div class="ip-earnings-label">Total Earned</div><div class="ip-earnings-value"><span class="ip-currency">$</span><span class="ip-earnings-amount">0</span></div><div class="ip-earnings-change"><span>â†‘</span><span class="ip-earnings-change-value">$0 this month</span></div></div><div class="ip-stats"><div class="ip-stat"><div class="ip-stat-value ip-referrals-count">0</div><div class="ip-stat-label">Referrals</div></div><div class="ip-stat"><div class="ip-stat-value ip-conversion-rate">0%</div><div class="ip-stat-label">Conversion</div></div></div><div class="ip-progress"><div class="ip-progress-header"><span class="ip-progress-label">Next milestone</span><span class="ip-progress-value ip-next-milestone">$100</span></div><div class="ip-progress-bar"><div class="ip-progress-fill" style="width: 0%"></div></div></div><div class="ip-achievements"><div class="ip-achievements-title">Achievements</div><div class="ip-achievements-grid" id="ip-achievements-grid"></div></div><button class="ip-cta" onclick="window.location.href='/signup'">Start Earning Today</button>`;const closeBtn=widget.querySelector('.ip-widget-close');closeBtn.addEventListener('click',()=>{hideWidget();trackEvent('income_proof_dismissed');});document.body.appendChild(widget);}function showWidget(){const widget=document.getElementById('ip-widget');if(widget&&!state.widgetVisible){widget.classList.add('ip-visible');state.widgetVisible=true;trackEvent('income_proof_shown');}}function hideWidget(){const widget=document.getElementById('ip-widget');if(widget){widget.classList.remove('ip-visible');state.widgetVisible=false;}}function createInlineWidget(targetSelector,userData={}){const target=document.querySelector(targetSelector);if(!target)return;const inline=document.createElement('div');inline.className='ip-container ip-inline';inline.id='ip-inline';inline.innerHTML=`<div class="ip-inline-header"><div class="ip-inline-avatar">${(userData.name||'U').charAt(0).toUpperCase()}</div><div class="ip-inline-info"><h4>${userData.name||'UniLiveHub Member'}</h4><p>${userData.title||'Affiliate Partner'}</p></div></div><div class="ip-inline-stats"><div class="ip-inline-stat"><div class="ip-inline-stat-value ip-total-earned">$0</div><div class="ip-inline-stat-label">Total Earned</div></div><div class="ip-inline-stat"><div class="ip-inline-stat-value ip-referrals">0</div><div class="ip-inline-stat-label">Referrals</div></div><div class="ip-inline-stat"><div class="ip-inline-stat-value ip-rank">#-</div><div class="ip-inline-stat-label">Global Rank</div></div></div><div class="ip-achievements"><div class="ip-achievements-title">Achievements Unlocked</div><div class="ip-achievements-grid" id="ip-inline-achievements"></div></div>`;target.appendChild(inline);updateInlineWidget(userData);trackEvent('income_proof_inline_shown');}function updateInlineWidget(data){const inline=document.getElementById('ip-inline');if(!inline)return;const totalEarned=inline.querySelector('.ip-total-earned');const referrals=inline.querySelector('.ip-referrals');const rank=inline.querySelector('.ip-rank');if(totalEarned&&data.totalEarned!==undefined){totalEarned.textContent=formatCurrency(data.totalEarned);}if(referrals&&data.referrals!==undefined){referrals.textContent=formatNumber(data.referrals);}if(rank&&data.rank!==undefined){rank.textContent='#'+formatNumber(data.rank);}const achievementsGrid=inline.querySelector('#ip-inline-achievements');if(achievementsGrid&&data.achievements){renderAchievements(achievementsGrid,data.achievements);}}function updateWidget(data){const widget=document.getElementById('ip-widget');if(!widget)return;if(data.earnings){const amountEl=widget.querySelector('.ip-earnings-amount');if(amountEl){animateNumber(amountEl,data.earnings.total);}const changeEl=widget.querySelector('.ip-earnings-change-value');if(changeEl){const monthlyChange=data.earnings.thisMonth||0;changeEl.textContent=formatCurrency(monthlyChange)+' this month';const changeContainer=widget.querySelector('.ip-earnings-change');if(monthlyChange<0){changeContainer.classList.add('ip-negative');changeContainer.querySelector('span:first-child').textContent='â†“';}}}if(data.referrals!==undefined){const referralsEl=widget.querySelector('.ip-referrals-count');if(referralsEl){animateNumber(referralsEl,data.referrals);}}if(data.conversionRate!==undefined){const convEl=widget.querySelector('.ip-conversion-rate');if(convEl){convEl.textContent=data.conversionRate.toFixed(1)+'%';}}if(data.nextMilestone&&data.earnings){const milestoneEl=widget.querySelector('.ip-next-milestone');const progressFill=widget.querySelector('.ip-progress-fill');if(milestoneEl){milestoneEl.textContent=formatCurrency(data.nextMilestone);}if(progressFill){const progress=Math.min((data.earnings.total/data.nextMilestone)*100,100);progressFill.style.width=progress+'%';}}if(data.achievements){const achievementsGrid=widget.querySelector('#ip-achievements-grid');if(achievementsGrid){renderAchievements(achievementsGrid,data.achievements);}}state.dataLoaded=true;}function renderAchievements(container,unlockedIds=[]){container.innerHTML='';const displayAchievements=Object.entries(achievementDefs).slice(0,6).map(([id,def])=>({...def,id,unlocked: unlockedIds.includes(id)}));displayAchievements.forEach(achievement=>{const el=document.createElement('div');el.className='ip-achievement'+(achievement.unlocked ? '' : ' ip-achievement-locked');el.title=achievement.description;el.innerHTML=`<span class="ip-achievement-icon">${achievement.icon}</span><span class="ip-achievement-name">${achievement.name}</span>`;container.appendChild(el);});}function createLeaderboard(targetSelector){const target=document.querySelector(targetSelector);if(!target)return;const leaderboard=document.createElement('div');leaderboard.className='ip-container ip-leaderboard';leaderboard.id='ip-leaderboard';leaderboard.innerHTML=`<div class="ip-leaderboard-title">Top Earners This Month</div><div class="ip-leaderboard-list" id="ip-leaderboard-list"></div>`;target.appendChild(leaderboard);}function updateLeaderboard(entries,currentUserId){const list=document.getElementById('ip-leaderboard-list');if(!list)return;list.innerHTML='';entries.forEach((entry,index)=>{const el=document.createElement('div');el.className='ip-leaderboard-item'+(entry.id===currentUserId ? ' ip-current-user' : '');let rankClass='';if(index===0)rankClass='ip-gold';else if(index===1)rankClass='ip-silver';else if(index===2)rankClass='ip-bronze';el.innerHTML=`<div class="ip-leaderboard-rank ${rankClass}">${index+1}</div><div class="ip-leaderboard-name">${entry.name}</div><div class="ip-leaderboard-earnings">${formatCurrency(entry.earnings)}</div>`;list.appendChild(el);});}async function fetchData(){if(!config.apiEndpoint){return getDemoData();}try{const response=await fetch(config.apiEndpoint);if(!response.ok)throw new Error('API error');return await response.json();}catch(error){console.log('IncomeProof: Using demo data');return getDemoData();}}function getDemoData(){return{earnings:{total: 2847,thisMonth: 523,lastMonth: 412},referrals: 47,conversionRate: 12.5,nextMilestone: 5000,achievements:['first_referral','ten_referrals','first_100','early_adopter'],leaderboard:[{id: '1',name: 'Alex K.',earnings: 12500},{id: '2',name: 'Maria S.',earnings: 9800},{id: '3',name: 'John D.',earnings: 7200},{id: '4',name: 'Sarah M.',earnings: 5600},{id: '5',name: 'You',earnings: 2847}]};}function startAutoRefresh(){if(state.refreshTimer)return;state.refreshTimer=setInterval(async()=>{const data=await fetchData();updateWidget(data);},config.refreshInterval);}function stopAutoRefresh(){if(state.refreshTimer){clearInterval(state.refreshTimer);state.refreshTimer=null;}}async function init(options={}){if(state.initialized)return;Object.assign(config,options);injectStyles();if(config.showWidget&&config.widgetPosition!=='inline'){createWidget();const data=await fetchData();updateWidget(data);setTimeout(()=>{showWidget();},2000);startAutoRefresh();}state.initialized=true;console.log('IncomeProof: Initialized');}window.IncomeProof={init: init,configure:(options)=>Object.assign(config,options),show: showWidget,hide: hideWidget,toggle:()=>state.widgetVisible ? hideWidget(): showWidget(),update: updateWidget,refresh: async()=>{const data=await fetchData();updateWidget(data);return data;},createInlineWidget: createInlineWidget,updateInlineWidget: updateInlineWidget,createLeaderboard: createLeaderboard,updateLeaderboard: updateLeaderboard,startAutoRefresh: startAutoRefresh,stopAutoRefresh: stopAutoRefresh,getConfig:()=>({...config}),getState:()=>({...state}),getAchievements:()=>({...achievementDefs})};if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',()=>{if(config.showWidget)init();});}else{if(config.showWidget)init();}})();